% This file begins a draft of the master makefile.  Below, I have listed dummy names for sub-makefiles we may want to create.  Please add/edit.

.PHONY: all download data test stage1 stage2 visualization shiny report 
all: clean

clean:
	find . -name "*.so" -o -name "*.pyc" -o -name "*.pyx.md5" | xargs rm -f

download:
	nosetests code/utils/tests data/tests/ --with-coverage --cover-package=code/utils/functions,data/data_hashes.py,data/tests/test_get_check_hashes.py

data:
	nosetests code/utils/tests data/tests/

test:
	nosetests data/tests code/utils/tests -v

stage1:
	cd data && make download_all

stage2
	cd data && make download_filtered_data

visualziation:
	cd data && make validate_data

shiny:
	cd code/utils/scripts && python eda.py
	cd code/utils/scripts && python hist-outliers_script.py

analysis:
	make stage1 
	make stage2

report:
	cd paper && make all
	cd paper && make clean
