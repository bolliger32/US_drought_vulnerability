#  DESCRIPTION: This code downloads the monthly NOAA weather station data for US climatological divisions, as well as NOAA's README file describing the data and methodology.  
#  Variables : precipitation, average temp, PDSI, PHDI, ZNDX, PMDI, Heating Degree Days, Cooling Degree Days.
#  For thorough discussion of these variables, see the noaa_official_README.txt. 
#  Created 3/28/2015 by Kate Pennington

library(rgdal)
library(spdep)
library(sp)
library(fields)
library(MBA)

# DOWNLOAD THE RAW DATA

#  Note: Change the pathname before running code.

#  1. Download the README file that defines NOAA variables and methodology.

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/divisional-readme.txt", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_official_README.txt")

# 2. Precipitation

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-pcpndv-v1.0.0-20160304", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_precip.csv")

# 3. Average temp

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-tmpcdv-v1.0.0-20160304", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_temp.csv")

# 4. PDSI

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-pdsidv-v1.0.0-20160304", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_pdsi.csv")

# 5. PHDI

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-phdidv-v1.0.0-20160304", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_phdi.csv")

# 6. ZNDX

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-zndxdv-v1.0.0-20160304", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_zndx.csv")

# 7. Cooling Degree Days

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-cddcdv-v1.0.0-20160304", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_cdd.csv")

# 8. Heating Degree Days

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-hddcdv-v1.0.0-20160304", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_hdd.csv")

# 9.  Shapefiles to match climatological divisions for GIS join.

download.file("ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/CONUS_CLIMATE_DIVISIONS.shp.zip", "/Users/katepennington/Dropbox/US_Drought_Vulnerability/noaa_CLIM_DIVS.zip")
