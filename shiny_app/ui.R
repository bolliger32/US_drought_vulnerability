library(shiny)

shinyUI(fluidPage(
  
  # Application title
  titlePanel("US Drought Vulnerability"),
  

  sidebarLayout(
    sidebarPanel(
      # conditionalPanel(
      #   condition="input.tb==0",
      #   selectInput("num", "Choose your Numerator:", choices = c('mortality'='1','income'='2')),
      #   selectInput("denom","Choose your Denominator:",choices=c('drought index'="1")),
      #   sliderInput("numD",
      #               "Lag:", 
      #               sep = "",
      #               value = 0,
      #               min = 0,
      #               step=1,
      #               max = 5),
      #   sliderInput("denomD",
      #               "Year:", 
      #               sep = "",
      #               value = 0,
      #               min = 0,
      #               step=1,
      #               max = 5)
      #   
      # ),
      # 
      conditionalPanel(
        condition = "input.tb==1 | input.tb==2" ,
      radioButtons("indic", "Indicator:",
                   c("Mortality Rate Adjusted >65" = "mortalityOld",#"mortalityOld"
                     #"Mortality Rate Adjusted <5"= "mortalityYoung",
                     "Mortality Rate Adjusted All"="mortalityAll",
                     "Unemployment Rate" = "unemployment",
                     "Drought 1 Year" = "drought1",
                     "Drought 3 Year"= "drought3",
                     "Drought 5 Year"="drought5",
                     "Corn Yield"="corn",
                     "Soy Bean Yield"="soy",
                     "Wheat Yield"="wheat")),
      
      
      br(),
      
      sliderInput("y",
                  "Year:", 
                  sep = "",
                  value = 2004,
                  min = 2004,
                  step=1,
                  max = 2014,
                  animate=animationOptions(interval=1500, loop=TRUE))
      ),
      br(),
      conditionalPanel(
        condition = "input.tb == 2",
        textInput("state", label = "Choose a state to explore (continental US only, case matters) Click on a county of interest.", value = "California"),
        selectInput("quant","Color Quantiles:",choices=c("overall"="1",'by state'="2"))
        
      ),
      br(),
      conditionalPanel(
        condition = "input.tb == 2"
        #actionButton("go", "Go")
      ),
      
      
      conditionalPanel(
        condition = "input.tb == 5",
        selectInput("response","Response Variable:",choices=c("Mortality Rate >65 Adjusted"="6",
                              "Mortality Rate All Adjusted"= "12", "Unemployment Rate"="24")),
        selectInput("predictor","Predictor Variable:",choices=c("Drought 1 Year"="15",
                                                                "Drought 3 Year"="13",
                                                                "Drought 5 Year"="14")),
        checkboxInput("checkbox", label = "Show Only Statistically Significant Under Permutation Tests", value = FALSE)
      ),
      conditionalPanel(
        condition = "input.tb == 6",
        selectInput("response2","Response Variable:",choices=c("Mortality Rate >65 Adjusted"="6",
                                                              "Mortality Rate All Adjusted"= "12", "Unemployment Rate"="24")),
        selectInput("predictor2","Predictor Variable:",choices=c("Drought 1 Year"="15",
                                                                "Drought 3 Year"="13",
                                                                "Drought 5 Year"="14")),
        checkboxInput("checkbox", label = "Show Only Statistically Significant Under Permutation Tests", value = FALSE),
        
        textInput("state2", label = "Choose a state to explore (continental US only, case matters)", value = "California"),
        selectInput("quant2","Color Quantiles:",choices=c("overall"="1",'by state'="2"))
        
      ),
      
      conditionalPanel(
        condition = "input.tb == 7",
        selectInput("agg","Aggregation Method:",choices=c("mean over years"="1",
                                                               "standard deviation over years"= "2")),
        selectInput("secStageVar","Second Stage Predictor Variable:",
                    choices=c("PWGTP"="1",
                              "age5"="2",
                              "age65"="3",
                              "eth_hispanic"="4",
                              "race_white"="5",
                              "race_black"="6",
                              "sex_male"="7",
                              "work_crops_ranch"="8",
                              "work_PWGTP"="9",
                              "WGTP"="10",
                              "WATP"="11",
                              "WATP_WGTP"="12",
                              "HINCP"="13",
                              "HINCP_WGTP"="14",
                              "tenure_owned"="15",
                              "tenure_WGTP"="16"))
                              
        #checkboxInput("checkbox", label = "Show Only Statistically Significant Under Permutation Tests", value = FALSE),
        
        #textInput("state2", label = "Choose a state to explore (continental US only, case matters)", value = "California"),
        #selectInput("quant2","Color Quantiles:",choices=c("overall"="1",'by state'="2"))
        
      ),
      
      conditionalPanel(
        condition = "input.tb == 8",
        selectInput("agg2","Aggregation Method:",choices=c("mean over years"="1",
                                                          "standard deviation over years"= "2")),
        selectInput("secStageVar2","Second Stage Predictor Variable:",
                    choices=c("PWGTP"="1",
                              "age5"="2",
                              "age65"="3",
                              "eth_hispanic"="4",
                              "race_white"="5",
                              "race_black"="6",
                              "sex_male"="7",
                              "work_crops_ranch"="8",
                              "work_PWGTP"="9",
                              "WGTP"="10",
                              "WATP"="11",
                              "WATP_WGTP"="12",
                              "HINCP"="13",
                              "HINCP_WGTP"="14",
                              "tenure_owned"="15",
                              "tenure_WGTP"="16")),
        
        #checkboxInput("checkbox", label = "Show Only Statistically Significant Under Permutation Tests", value = FALSE),
        
        textInput("state3", label = "Choose a state to explore (continental US only, case matters)", value = "California"),
        selectInput("quant3","Color Quantiles:",choices=c("overall"="1",'by state'="2"))
        
      ),
      
      
      conditionalPanel(
        condition = "input.tb == 9",
        selectInput("response3","Response Variable:",choices=c("Mortality Rate >65 Adjusted"="6",
                                                               "Mortality Rate All Adjusted"= "12", "Unemployment Rate"="24")),
        selectInput("predictor3","Predictor Variable:",choices=c("Drought 1 Year"="15",
                                                                 "Drought 3 Year"="13",
                                                                 "Drought 5 Year"="14"))#,
        #checkboxInput("checkbox", label = "Show Only Statistically Significant Under Permutation Tests", value = FALSE),
        
        #textInput("state2", label = "Choose a state to explore (continental US only, case matters)", value = "California"),
        #selectInput("quant2","Color Quantiles:",choices=c("overall"="1",'by state'="2"))
        
      )
      
      
      
    ),
  #   br(),
  #   conditionalPanel(
  #     condition = "input.tb==5" ,
  #     radioButtons("indic2", "Indicator:",
  #                  c("Mortality Rate Adjusted >65" = "mortalityOld",#"mortalityOld"
  #                    #"Mortality Rate Adjusted <5"= "mortalityYoung",
  #                    "Mortality Rate Adjusted All"="mortalityAll",
  #                    "Unemployment Rate" = "unemployment",
  #                    "Drought 1 Year" = "drought1",
  #                    "Drought 3 Year"= "drought3",
  #                    "Drought 5 Year"="drought5"))
  #  
  # ),
  
    
    
    mainPanel(
      tabsetPanel(id="tb",type = "tabs", 

                  tabPanel("First Stage Variables", plotOutput("fullMap"),value=1), 
                  tabPanel("First Stage Variables- By State", plotOutput("byState",click = "plot_click"),plotOutput("click_info"),value=2), 
                  tabPanel("Coefficients from First Stage", plotOutput("fullMap2"),value=5), 
                  tabPanel("Coefficients from First Stage- By State",plotOutput("byState2") ,value=6), #plotOutput("coeff1_state",click = "plot_click"),plotOutput("click_info")
                  tabPanel("Second Stage Variables", plotOutput("fullMap3"),value=7),
                  tabPanel("Second Stage Variables- By State",plotOutput("byState3"),value=8),
                  tabPanel("Second Stage Results", tableOutput("table2"),value=9)
                 
                  
      )
      
      
    )
  )
))