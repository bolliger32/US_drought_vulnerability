combined<-read.csv("data/data_combined.csv")

require(maps)
data(county.fips)
county.fips

lookup<-read.csv("data/county_ID_lookup_table.csv",stringsAsFactors=T)

library(stringr)
#lookup$STATEFP10=str_pad(lookup[,1], 2, pad = "0")

combined$COUNTYFP10=str_pad(combined[,"COUNTYFP10"],3,pad="0")
combined$combinedFIPS=paste(combined$STATEFP10,combined$COUNTYFP10,sep="")
testMerge=merge(combined,county.fips,by.x="combinedFIPS",by.y="fips",all.x=T)
nrow(testMerge)
nrow(combined)
## missing 110, just carry on for now

names(testMerge)
forShiny<-testMerge[,c(4,26,19,7,13,14,15,16,25)]
names(forShiny)
head(forShiny)
names(forShiny)=c("year","county","state","mortalityOld",
                  "mortalityAll","drought3","drought5","drought1","unemployment")
write.csv(forShiny,"shiny_app/forShinyData.csv",row.names=F)
